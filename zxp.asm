vzxp ;convert pic from standart ZX            call    readfile2n ;считаем первые 64 сектора            call    clearpag            ld      a,8 ;оступ            ld      (shiftL),a            ld      (shiftR),a            ld      a,32            ld      (hsize),a            ld      hl,loadadr2 ;откуда            ld      de,#c000+320 ;левый верхний            ld      b,3 ;третиvzxp_2            push    bc            ld      b,8 ;символьных строкvzxp_1            push    bc            ;цикл            ld      b,8 ;строкvzxp_0            push    bc            push    hl            ld      hl,(shiftL)            add     hl,de            ld      d,h            ld      e,l            pop     hl            push    hl            ld      a,(hsize)            ld      b,a                ;перенос строкиvzxp_3			call stretchPix ;удвоить пиксели по ширине            inc     hl            inc     de            dec     b            jp      nz,vzxp_3                ;перенесли            push    hl            ld      hl,(shiftR)            add     hl,de            ld      d,h            ld      e,l            pop     hl            pop     hl            inc     h            ;закрываем цикл            pop     bc            ;след строка            dec     b            jp      nz,vzxp_0            ld      bc,2016            and     a            sbc     hl,bc            pop     bc            dec     b            jp      nz,vzxp_1            ld      bc,#700            add     hl,bc            pop     bc            dec     b            jp      nz,vzxp_2            ret