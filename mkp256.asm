mkpal256   ;создает палитру 256 байт            xor     a            ld      de,palet256mkpal256_0            push    af            ;ld      a,(hl)            ;ink            exx            ld      e,a            and     %01000000            rrca            rrca            rrca            ld      c,a            ld      a,e            and     %00000111            or      c            ld      c,a            ld      b,0            ld      hl,palette            add     hl,bc            ld      a,(hl)            ld      d,a            ;paper            ld      a,e            and     %10000000            rrca            rrca            rrca            rrca            ld      c,a            ld      a,e            and     %00111000            rrca            rrca            rrca            or      c            ld      c,a            ld      b,0            ld      hl,palette            add     hl,bc            ld      a,(hl)            rlca            rlca            rlca            or      d            exx            ld      (de),a ;готов атрибут            inc     de            pop     af            inc     a            jr      nz,mkpal256_0            ret