vzxm12288mc ;convert pic from ZX multiColor 12288mc .mc            call    vzxm12288mcp ;пиксели            ;теперь атрибуты            call    vzxm12288mca            ;коррекция числа страниц            ld      a,2 ; две            ld      (allpicpag),a ; всего страниц            call   showpic ;показать картинку            xor     a            call    pag_on            call    gmxpagoff            retvzxm12288mcp ;convert pixel            call    readfile2n ;считаем первые 64 сектора или весь файл, если он меньше            call    clearpag            ld      a,8 ;оступ            ld      (shiftL),a            ld      (shiftR),a            ld      a,32            ld      (hsize),a            ld      hl,loadadr2 ;откуда            ld      de,#c000+320 ;левый верхний            ld      b,192 ;строкvzxm12288mcp_0            push    bc            ex 		de,hl            ld      bc,(shiftL)            add     hl,bc            ex 		de,hl           ; push    hl            ld      a,(hsize)            ld      b,a                ;перенос строкиvzxm12288mcp_3			call stretchPix ;удвоить пиксели по ширине			            inc     hl            inc     de            dec     b ;закрываем цикл столбцов            jp      nz,vzxm12288mcp_3			ex 		de,hl            ld      bc,(shiftR)            add     hl,bc			ex 		de,hl			pop	bc ;закрываем цикл строк			dec b			jp      nz,vzxm12288mcp_0            retvzxm12288mca ;convert atr             ;теперь атрибуты            ld      a,(curpicpag)            inc     a            call    pag_on            ld      hl,loadadr2+6144 ;откуда            ld      de,#c000+320 ;левый верхний            ld      b,192  ;цикл строкvzxm12288mca3            push    bc			ex 		de,hl            ld      bc,(shiftL)            add     hl,bc			ex 		de,hl            ;push    hl            ld      b,32  ;столбцовvzxm12288mca1            ld      a,(hl)            ld      (de),a            inc     de            ld      (de),a            inc     hl            inc     de            djnz    vzxm12288mca1 			ex 		de,hl            ld      bc,(shiftR)            add     hl,bc			ex 		de,hl            ;ld      bc,32            ;add     hl,bc            pop     bc            djnz    vzxm12288mca3            ret